# æ ˆ_å †ğŸŠ

## 20.æœ‰æ•ˆçš„æ‹¬å·
```javascript
/**
 * @param {string} s
 * @return {boolean}
 */
var isValid = function (s) {
    const map = {
        '(': -1,
        ')': 1,
        '{': -2,
        '}': 2,
        '[': -3,
        ']': 3
    }
    const stack=[]
    for(const c of s){
        if(map[c]<0){
            stack.push(map[c])
        }else if(map[c]>0){
            let top=stack.pop()
            if(top+map[c]!=0)return false
        }
    }
    if(stack.length!=0)return false
    return true
};
```
## 155.æœ€å°æ ˆ
```javascript

var MinStack = function() {
    //æäº†ä¸€ä¸ªè¾…åŠ©æ ˆï¼ï¼ï¼
    this.stack=[]
    this.min_stack=[Infinity]
};

/** 
 * @param {number} val
 * @return {void}
 */
MinStack.prototype.push = function(val) {
    this.stack.push(val)
    this.min_stack.push(Math.min(this.min_stack[this.min_stack.length-1],val))
};

/**
 * @return {void}
 */
MinStack.prototype.pop = function() {
    this.stack.pop()
    this.min_stack.pop()
};

/**
 * @return {number}
 */
MinStack.prototype.top = function() {
    return this.stack[this.stack.length-1]
};

/**
 * @return {number}
 */
MinStack.prototype.getMin = function() {
    return this.min_stack[this.min_stack.length-1]
};

/**
 * Your MinStack object will be instantiated and called as such:
 * var obj = new MinStack()
 * obj.push(val)
 * obj.pop()
 * var param_3 = obj.top()
 * var param_4 = obj.getMin()
 */
```
## 394.å­—ç¬¦ä¸²è§£ç 
```javascript
const decodeString = (s) => {
    let numStack = [];        // å­˜å€æ•°çš„æ ˆ
    let strStack = [];        // å­˜ å¾…æ‹¼æ¥çš„str çš„æ ˆ
    let num = 0;              // å€æ•°çš„â€œæ¬è¿å·¥â€
    let result = '';          // å­—ç¬¦ä¸²çš„â€œæ¬è¿å·¥â€
    for (const char of s) {   // é€å­—ç¬¦æ‰«æ
        if (!isNaN(char)) {   // é‡åˆ°æ•°å­—
            num = num * 10 + Number(char); // ç®—å‡ºå€æ•°
        } else if (char == '[') {  // é‡åˆ° [
            strStack.push(result); // resultä¸²å…¥æ ˆ
            result = '';           // å…¥æ ˆåæ¸…é›¶
            numStack.push(num);    // å€æ•°numè¿›å…¥æ ˆç­‰å¾…
            num = 0;               // å…¥æ ˆåæ¸…é›¶
        } else if (char == ']') {  // é‡åˆ° ]ï¼Œä¸¤ä¸ªæ ˆçš„æ ˆé¡¶å‡ºæ ˆ
            let repeatTimes = numStack.pop(); // è·å–æ‹·è´æ¬¡æ•°
            result = strStack.pop() + result.repeat(repeatTimes); // æ„å»ºå­ä¸²
        } else {                   
            result += char;        // é‡åˆ°å­—æ¯ï¼Œè¿½åŠ ç»™resultä¸²
        }
    }
    return result;
};
```
## 739.æ¯æ—¥æ¸©åº¦
```javascript
/**
 * @param {number[]} temperatures
 * @return {number[]}
 */
var dailyTemperatures = function (temperatures) {
    // å•è°ƒé€’å‡æ ˆ
    let stack = [];
    let n = temperatures.length;
    let res = new Array(n).fill(0);

    // éå†æ¯æ—¥æ¸©åº¦ï¼Œç»´æŠ¤ä¸€ä¸ªå•è°ƒæ ˆï¼Œå­˜å‚¨ä¸‹æ ‡
    for (let i = 0; i < n; i++) {
        // å½“æ—¥æ¸©åº¦å¤§äºæ ˆé¡¶æ¸©åº¦ï¼Œè¯´æ˜æ ˆé¡¶æ¸©åº¦çš„å‡æ¸©æ—¥æ‰¾åˆ°äº†ï¼Œæ ˆé¡¶å‡ºæ ˆå¹¶è®¡ç®—å¤©æ•°ï¼›ç»§ç»­åˆ¤æ–­æ ˆé¡¶å…ƒç´ 
        while (stack.length && temperatures[i] > temperatures[stack[stack.length - 1]]) {
            const top = stack.pop();
            res[top] = i - top;
        }
        // æ ˆä¸ºç©º æˆ– æ¯æ—¥æ¸©åº¦å°äºç­‰äºæ ˆé¡¶æ¸©åº¦ => ç›´æ¥å…¥æ ˆ
        stack.push(i)
    }

    return res;
};
```
## 84.æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢ï¼ˆä¸ä¼šï¼‰
```javascript
/**
 * @param {number[]} heights
 * @return {number}
 */
var largestRectangleArea = function (heights) {
    let maxArea = 0, stack = [];
    let len = heights.length
    //å•è°ƒé€’å‡æ ˆ
    for (let i = 0; i <= len; i++) {
        while (stack.length > 0 && (heights[i] < heights[stack[stack.length - 1]] || i === len)) {
            let height = heights[stack.pop()],
                width = stack.length > 0 ? i - stack[stack.length - 1] - 1 : i;

            maxArea = Math.max(maxArea, width * height);
        }

        stack.push(i);
    }

    return maxArea;
};

```
## 844. æ¯”è¾ƒå«é€€æ ¼çš„å­—ç¬¦ä¸²
```javascript
/**
 * @param {string} s
 * @param {string} t
 * @return {boolean}
 */
var backspaceCompare = function(s, t) {
    let sStack=[],tStack=[]
    for(const c of s){
        if(c=='##'){
            sStack.pop()
        }else{
            sStack.push(c)
        }
    }
    for(const c of t){
        if(c=='##'){
            tStack.pop()
        }else{
            tStack.push(c)
        }
    }
    return sStack.join("")==tStack.join("")
};
```
## 215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ 
ä¸€ç§ç›¸å¯¹ç®€å•çš„æ–¹å¼
```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
 // æ•´ä¸ªæµç¨‹å°±æ˜¯ä¸Šæµ®ä¸‹æ²‰
var findKthLargest = function(nums, k) {
   let heapSize=nums.length
    buildMaxHeap(nums,heapSize) // æ„å»ºå¥½äº†ä¸€ä¸ªå¤§é¡¶å †
    // è¿›è¡Œä¸‹æ²‰ å¤§é¡¶å †æ˜¯æœ€å¤§å…ƒç´ ä¸‹æ²‰åˆ°æœ«å°¾
    for(let i=nums.length-1;i>=nums.length-k+1;i--){
        swap(nums,0,i)
        --heapSize // ä¸‹æ²‰åçš„å…ƒç´ ä¸å‚ä¸åˆ°å¤§é¡¶å †çš„è°ƒæ•´
        // é‡æ–°è°ƒæ•´å¤§é¡¶å †
         maxHeapify(nums, 0, heapSize);
    }
    return nums[0]
   // è‡ªä¸‹è€Œä¸Šæ„å»ºä¸€é¢—å¤§é¡¶å †
   function buildMaxHeap(nums,heapSize){
     for(let i=Math.floor(heapSize/2)-1;i>=0;i--){
        maxHeapify(nums,i,heapSize)
     }
   }
   // ä»å·¦å‘å³ï¼Œè‡ªä¸Šè€Œä¸‹çš„è°ƒæ•´èŠ‚ç‚¹
   function maxHeapify(nums,i,heapSize){
       let l=i*2+1
       let r=i*2+2
       let largest=i
       if(l < heapSize && nums[l] > nums[largest]){
           largest=l
       }
       if(r < heapSize && nums[r] > nums[largest]){
           largest=r
       }
       if(largest!==i){
           swap(nums,i,largest) // è¿›è¡ŒèŠ‚ç‚¹è°ƒæ•´
           // ç»§ç»­è°ƒæ•´ä¸‹é¢çš„éå¶å­èŠ‚ç‚¹
           maxHeapify(nums,largest,heapSize)
       }
   }
   function swap(a,  i,  j){
        let temp = a[i];
        a[i] = a[j];
        a[j] = temp;
   }
};
```
å¾ˆæ—©ä¹‹å‰å†™çš„ç¬¬ä¸€ç§å®Œæ•´çš„æ–¹å¼
```javascript
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var findKthLargest = function(nums, k) {
    // åˆå§‹åŒ–å°é¡¶å †
    // è¯·æ³¨æ„ï¼šæˆ‘ä»¬å°†å †ä¸­æ‰€æœ‰å…ƒç´ å–åï¼Œä»è€Œç”¨å¤§é¡¶å †æ¥æ¨¡æ‹Ÿå°é¡¶å †
    const maxHeap = new MaxHeap([]);
    // å°†æ•°ç»„çš„å‰ k ä¸ªå…ƒç´ å…¥å †
    for (let i = 0; i < k; i++) {
        pushMinHeap(maxHeap, nums[i]);
    }
    // ä»ç¬¬ k+1 ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¿æŒå †çš„é•¿åº¦ä¸º k
    for (let i = k; i < nums.length; i++) {
        // è‹¥å½“å‰å…ƒç´ å¤§äºå †é¡¶å…ƒç´ ï¼Œåˆ™å°†å †é¡¶å…ƒç´ å‡ºå †ã€å½“å‰å…ƒç´ å…¥å †
        if (nums[i] > peekMinHeap(maxHeap)) {
            popMinHeap(maxHeap);
            pushMinHeap(maxHeap, nums[i]);
        }
    }
    // è¿”å›å †ä¸­å…ƒç´ 
    return getMinHeap(maxHeap)[0];
};

/* å…ƒç´ å…¥å † */
function pushMinHeap(maxHeap, val) {
    // å…ƒç´ å–å
    maxHeap.push(-val);
}

/* å…ƒç´ å‡ºå † */
function popMinHeap(maxHeap) {
    // å…ƒç´ å–å
    return -maxHeap.pop();
}

/* è®¿é—®å †é¡¶å…ƒç´  */
function peekMinHeap(maxHeap) {
    // å…ƒç´ å–å
    return -maxHeap.peek();
}

/* å–å‡ºå †ä¸­å…ƒç´  */
function getMinHeap(maxHeap) {
    // å…ƒç´ å–å
    return maxHeap.getMaxHeap().map((num) => -num);
}

class MaxHeap {
  constructor(arr) {
    this.heap = arr;
  }
  size() {
    return this.heap.length;
  }
  isEmpty() {
    return this.size() === 0;
  }
  peek(){
    return this.heap[0]
  }
  getLeftChild(i) {
    return i * 2 + 1;
  }
  getRightChild(i) {
    return i * 2 + 2;
  }
  getParent(i) {
    return parseInt((i - 1) / 2);
  }
  push(item) {
    this.heap.push(item);
    this.shiftUp(this.size() - 1);
  }
  pop() {
    this.shiftDown(0);
  }
  shiftUp(i) {
    while (this.heap[i] > this.heap[this.getParent(i)]) {
      this.swap(i, this.getParent(i));
      i = this.getParent(i);
    }
  }
  shiftDown(i) {
    //äº¤æ¢å€¼å¹¶ä¸”åˆ é™¤æœ€åä¸€ä¸ªå€¼
    this.swap(i, this.size() - 1);
    this.heap.pop();

    while (this.getLeftChild(i) < this.size()) {
      let j = this.getLeftChild(i);
      if (j + 1 < this.size() && this.heap[j] < this.heap[j + 1]) j++;
      if (this.heap[i] >= this.heap[j]) break;
      this.swap(i, j);
      i = j;
    }
  }
  swap(i, j) {
    const tmp = this.heap[i];
    this.heap[i] = this.heap[j];
    this.heap[j] = tmp;
  }
  getMaxHeap(){
    return this.heap
  }
}

```
## 347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ 
```javascript
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number[]}
 */
var topKFrequent = function (nums, k) {
    const map = {}
    for (const it of nums) {
        map[it] = (map[it] || 0) + 1
    }
    let numArr = Object.values(map)
    const maxHeap = new MaxHeap([]);
    // å°†æ•°ç»„çš„å‰ k ä¸ªå…ƒç´ å…¥å †
    for (let i = 0; i < k; i++) {
        pushMinHeap(maxHeap, numArr[i]);
    }
    // ä»ç¬¬ k+1 ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¿æŒå †çš„é•¿åº¦ä¸º k
    for (let i = k; i < numArr.length; i++) {
        // è‹¥å½“å‰å…ƒç´ å¤§äºå †é¡¶å…ƒç´ ï¼Œåˆ™å°†å †é¡¶å…ƒç´ å‡ºå †ã€å½“å‰å…ƒç´ å…¥å †
        if (numArr[i] > peekMinHeap(maxHeap)) {
            popMinHeap(maxHeap);
            pushMinHeap(maxHeap, numArr[i]);
        }
    }
    // è¿”å›å †ä¸­å…ƒç´ 
    let res = []
    let narr = getMinHeap(maxHeap);
    for (const key in map) {
        if (narr.includes(map[key])) {
            res.push(key)
        }
    }
    return res
};


function pushMinHeap(maxHeap, val) {
    // å…ƒç´ å–å
    maxHeap.push(-val);
}

/* å…ƒç´ å‡ºå † */
function popMinHeap(maxHeap) {
    // å…ƒç´ å–å
    return -maxHeap.pop();
}

/* è®¿é—®å †é¡¶å…ƒç´  */
function peekMinHeap(maxHeap) {
    // å…ƒç´ å–å
    return -maxHeap.peek();
}

/* å–å‡ºå †ä¸­å…ƒç´  */
function getMinHeap(maxHeap) {
    // å…ƒç´ å–å
    return maxHeap.getMaxHeap().map((num) => -num);
}

class MaxHeap {
    constructor(arr) {
        this.heap = arr;
    }
    size() {
        return this.heap.length;
    }
    isEmpty() {
        return this.size() === 0;
    }
    peek() {
        return this.heap[0]
    }
    getLeftChild(i) {
        return i * 2 + 1;
    }
    getRightChild(i) {
        return i * 2 + 2;
    }
    getParent(i) {
        return parseInt((i - 1) / 2);
    }
    push(item) {
        this.heap.push(item);
        this.shiftUp(this.size() - 1);
    }
    pop() {
        this.shiftDown(0);
    }
    shiftUp(i) {
        while (this.heap[i] > this.heap[this.getParent(i)]) {
            this.swap(i, this.getParent(i));
            i = this.getParent(i);
        }
    }
    shiftDown(i) {
        //äº¤æ¢å€¼å¹¶ä¸”åˆ é™¤æœ€åä¸€ä¸ªå€¼
        this.swap(i, this.size() - 1);
        this.heap.pop();

        while (this.getLeftChild(i) < this.size()) {
            let j = this.getLeftChild(i);
            if (j + 1 < this.size() && this.heap[j] < this.heap[j + 1]) j++;
            if (this.heap[i] >= this.heap[j]) break;
            this.swap(i, j);
            i = j;
        }
    }
    swap(i, j) {
        const tmp = this.heap[i];
        this.heap[i] = this.heap[j];
        this.heap[j] = tmp;
    }
    getMaxHeap() {
        return this.heap
    }
}

```

## 32. æœ€é•¿æœ‰æ•ˆæ‹¬å·
```js
/**
 * @param {string} s
 * @return {number}
 */
var longestValidParentheses = function (s) {
    let maxLen = 0;
    const stack = [];
    stack.push(-1);
    for (let i = 0; i < s.length; i++) {
        const c = s[i];
        if (c == '(') {       // å·¦æ‹¬å·çš„ç´¢å¼•ï¼Œå…¥æ ˆ
            stack.push(i);
        } else {              // éå†åˆ°å³æ‹¬å·
            stack.pop();        // æ ˆé¡¶çš„å·¦æ‹¬å·è¢«åŒ¹é…ï¼Œå‡ºæ ˆ
            if (stack.length) { // æ ˆæœªç©º
                const curMaxLen = i - stack[stack.length - 1]; // è®¡ç®—æœ‰æ•ˆè¿ç»­é•¿åº¦
                maxLen = Math.max(maxLen, curMaxLen);          // æŒ‘æˆ˜æœ€å¤§å€¼
            } else {            // æ ˆç©ºäº†
                stack.push(i);    // å…¥æ ˆå……å½“å‚ç…§
            }
        }
    }
    return maxLen;
};
```

## 402. ç§»æ‰ K ä½æ•°å­—
```js
/**
 * @param {string} num
 * @param {number} k
 * @return {string}
 */
var removeKdigits = function (num, k) {
    const stack = []
    for (let i = 0; i < num.length; i++) {
        const c = num[i]
        // æ ˆé¡¶çš„æ•°å±äºé«˜ä½ï¼Œåˆ æ‰å®ƒï¼Œå°çš„é¡¶ä¸Šï¼Œé«˜ä½å˜å°ï¼Œæ•ˆæœå¥½äºä½ä½å˜å°
        while (k > 0 && stack.length && stack[stack.length - 1] > c) {
            stack.pop()
            k--
        }
        // å¦‚æœå½“å‰éå†çš„æ•°æ¯”æ ˆé¡¶å¤§ï¼Œç¬¦åˆé€’å¢ï¼Œæ˜¯æ»¡æ„çš„ï¼Œè®©å®ƒå…¥æ ˆ
        // æ ˆä¸ºç©ºä¸”å½“å‰å­—ç¬¦ä¸²ä¸ºâ€œ0â€æ—¶ï¼Œä¸å…¥æ ˆï¼
        if(c!='0' || stack.length){
            stack.push(c)
        }
    }
    // æ³¨æ„åˆ°ï¼Œéå†ç»“æŸæ—¶ï¼Œæœ‰å¯èƒ½è¿˜æ²¡åˆ å¤Ÿ k ä¸ªå­—ç¬¦ï¼Œç»§ç»­å¾ªç¯å‡ºæ ˆï¼Œåˆ ä½ä½ã€‚
    while(k>0){
        stack.pop()
        k--
    }
    // åˆ å¤Ÿäº†ï¼Œä½†å¦‚æœæ ˆå˜ç©ºäº†ï¼Œä»€ä¹ˆä¹Ÿä¸å‰©ï¼Œåˆ™è¿”å› "0"ã€‚å¦åˆ™ï¼Œå°†æ ˆä¸­å‰©ä¸‹çš„å­—ç¬¦ï¼Œè½¬æˆå­—ç¬¦ä¸²è¿”å›ã€‚
    return stack.length==0?'0':stack.join('')
};
```

## 316. å»é™¤é‡å¤å­—æ¯
```js
// è¿™ä¸ªæ€è·¯å’Œ402. ç§»æ‰ K ä½æ•°å­—ç›¸ä¼¼ï¼ï¼ï¼
/**
 * @param {string} s
 * @return {string}
 */
var removeDuplicateLetters = function (s) {
    const stack = [];
    for (let i = 0; i < s.length; i++) {
        const c = s[i];
        // å‰é¢å­˜åœ¨çš„ç›´æ¥è·³è¿‡
        if (stack.includes(c)) continue;
        else {
            // æ³¨æ„æœ€åçš„ä¸€ä¸ªæ¡ä»¶ï¼Œåé¢å¦‚æœè¿˜å­˜åœ¨åŒæ ·çš„å­—ç¬¦å°±å¯ä»¥popå‡ºå»ï¼
            while (stack.length
                && stack[stack.length - 1] > c
                && s.slice(i).includes(stack[stack.length - 1])) {
                stack.pop();
            }
            stack.push(c);
        }
    }
    return stack.join("")
};
```

## 321. æ‹¼æ¥æœ€å¤§æ•°
```js
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @param {number} k
 * @return {number[]}
 */
function maxNumber(nums1, nums2, k) {
    /* åœ¨æ•°ç»„ä¸­æŒ‘é€‰kä¸ªæ•°ï¼Œé™åºæ’åˆ— */
    function pickMax(nums, k) {
        let stack = [];
        /* éœ€è¦åˆ é™¤çš„æ•°é‡ï¼ */
        let drop = nums.length - k;
        for (let num of nums) {
            while (drop > 0 && stack.length > 0 && stack[stack.length - 1] < num) {
                stack.pop();
                drop--;
            }
            stack.push(num);
        }
        return stack.slice(0, k);
    }

    /* å°†ä¸¤ä¸ªæ•°ç»„åˆå¹¶æˆä¸€ä¸ªï¼Œå¤§æ•°çš„æ•°ç»„ */
    function merge(A, B) {
        let ans = [];
        while (A.length > 0 || B.length > 0) {
            let bigger = A > B ? A : B;
            ans.push(bigger.shift());
        }
        return ans;
    }

    let max = [];
    for (let i = 0; i <= k; i++) {
        /* ä¿è¯ä¸¤ä¸ªæ•°ç»„æŒ‘é€‰çš„æ•°é‡å°é›¨ä»–ä»¬æ•°ç»„çš„é•¿åº¦ */
        if (i <= nums1.length && k - i <= nums2.length) {
            /* ä¸€ä¸ªæŒ‘é€‰ i ä¸ªï¼Œä¸€ä¸ªæŒ‘é€‰ k-i ä¸ª */
            let merged = merge(pickMax(nums1, i), pickMax(nums2, k - i));
            if (merged > max) {
                max = merged;
            }
        }
    }
    return max;
}
```

